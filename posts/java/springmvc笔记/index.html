<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SpringMVC学习笔记 | lu</title>
<meta name=keywords content><meta name=description content='第一个SpringMVC项目

新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl
新建maven子项目，添加web支持
配置web.xml，注册DispatcherServlet，如下：

<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">

    <!--配置DispatcherServlet-->
    <servlet>
        <servlet-name>springmvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <!--绑定一个springmvc的配置文件： [servlet-name]-servlet.xml-->
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:springmvc-servlet.xml</param-value>
        </init-param>
        <!--启动级别 1， 1级表示随着服务器一起启动-->
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- / 匹配所有请求（不包括 .jsp)-->
    <!-- /* 匹配所有请求（包括 .jsp)，若此处使用/*则在视图解析时会再加上.jsp，使页面名变为a.jsp.jsp从而出错-->
    <servlet-mapping>
        <servlet-name>springmvc</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app>

在resource下创建springmvc-servlet.xml，如下：

<?xml version="1.0" encoding="utf-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--处理器映射器-->
    <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/>
    <!--处理器适配器-->
    <bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>
    <!--视图解析器-->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" id="internalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" /> <!--前缀-->
        <property name="suffix" value=".jsp" />          <!--后缀-->
    </bean>

    <bean id="/hello" class="com.lu.controller.HelloController"/>
</beans>

java下创建Controller类

// 实现Controller接口，就是一个控制器，就会获得控制器功能：处理请求并返回一个模型与视图对象
public class HelloController implements Controller {
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        ModelAndView mv = new ModelAndView();
        // 业务代码
        String result = "SpringMVC";
        mv.addObject("msg", result);
        // 视图跳转
        mv.setViewName("hello");
        return mv;
    }
}

WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可


SpringMVC执行流程
'><meta name=author content="lu"><link rel=canonical href=http://localhost:1313/posts/java/springmvc%E7%AC%94%E8%AE%B0/><link crossorigin=anonymous href=/assets/css/stylesheet.d72444526d7ecbdb0015438a7fa89054a658bf759d0542e2e5df81ce94b493ee.css integrity="sha256-1yREUm1+y9sAFUOKf6iQVKZYv3WdBULi5d+BzpS0k+4=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/java/springmvc%E7%AC%94%E8%AE%B0/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/posts/java/springmvc%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="lu"><meta property="og:title" content="SpringMVC学习笔记"><meta property="og:description" content='第一个SpringMVC项目 新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl 新建maven子项目，添加web支持 配置web.xml，注册DispatcherServlet，如下： <?xml version="1.0" encoding="UTF-8"?> <web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd" version="4.0"> <!--配置DispatcherServlet--> <servlet> <servlet-name>springmvc</servlet-name> <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class> <!--绑定一个springmvc的配置文件： [servlet-name]-servlet.xml--> <init-param> <param-name>contextConfigLocation</param-name> <param-value>classpath:springmvc-servlet.xml</param-value> </init-param> <!--启动级别 1， 1级表示随着服务器一起启动--> <load-on-startup>1</load-on-startup> </servlet> <!-- / 匹配所有请求（不包括 .jsp)--> <!-- /* 匹配所有请求（包括 .jsp)，若此处使用/*则在视图解析时会再加上.jsp，使页面名变为a.jsp.jsp从而出错--> <servlet-mapping> <servlet-name>springmvc</servlet-name> <url-pattern>/</url-pattern> </servlet-mapping> </web-app> 在resource下创建springmvc-servlet.xml，如下： <?xml version="1.0" encoding="utf-8"?> <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"> <!--处理器映射器--> <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/> <!--处理器适配器--> <bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/> <!--视图解析器--> <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" id="internalResourceViewResolver"> <property name="prefix" value="/WEB-INF/jsp/" /> <!--前缀--> <property name="suffix" value=".jsp" /> <!--后缀--> </bean> <bean id="/hello" class="com.lu.controller.HelloController"/> </beans> java下创建Controller类 // 实现Controller接口，就是一个控制器，就会获得控制器功能：处理请求并返回一个模型与视图对象 public class HelloController implements Controller { @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception { ModelAndView mv = new ModelAndView(); // 业务代码 String result = "SpringMVC"; mv.addObject("msg", result); // 视图跳转 mv.setViewName("hello"); return mv; } } WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可 SpringMVC执行流程 '><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-25T14:58:37+00:00"><meta property="article:modified_time" content="2021-04-25T14:58:37+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SpringMVC学习笔记"><meta name=twitter:description content='第一个SpringMVC项目

新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl
新建maven子项目，添加web支持
配置web.xml，注册DispatcherServlet，如下：

<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">

    <!--配置DispatcherServlet-->
    <servlet>
        <servlet-name>springmvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <!--绑定一个springmvc的配置文件： [servlet-name]-servlet.xml-->
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:springmvc-servlet.xml</param-value>
        </init-param>
        <!--启动级别 1， 1级表示随着服务器一起启动-->
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- / 匹配所有请求（不包括 .jsp)-->
    <!-- /* 匹配所有请求（包括 .jsp)，若此处使用/*则在视图解析时会再加上.jsp，使页面名变为a.jsp.jsp从而出错-->
    <servlet-mapping>
        <servlet-name>springmvc</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app>

在resource下创建springmvc-servlet.xml，如下：

<?xml version="1.0" encoding="utf-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--处理器映射器-->
    <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/>
    <!--处理器适配器-->
    <bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>
    <!--视图解析器-->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" id="internalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" /> <!--前缀-->
        <property name="suffix" value=".jsp" />          <!--后缀-->
    </bean>

    <bean id="/hello" class="com.lu.controller.HelloController"/>
</beans>

java下创建Controller类

// 实现Controller接口，就是一个控制器，就会获得控制器功能：处理请求并返回一个模型与视图对象
public class HelloController implements Controller {
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        ModelAndView mv = new ModelAndView();
        // 业务代码
        String result = "SpringMVC";
        mv.addObject("msg", result);
        // 视图跳转
        mv.setViewName("hello");
        return mv;
    }
}

WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可


SpringMVC执行流程
'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"SpringMVC学习笔记","item":"http://localhost:1313/posts/java/springmvc%E7%AC%94%E8%AE%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SpringMVC学习笔记","name":"SpringMVC学习笔记","description":"第一个SpringMVC项目 新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl 新建maven子项目，添加web支持 配置web.xml，注册DispatcherServlet，如下： \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;web-app xmlns=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\u0026#34; version=\u0026#34;4.0\u0026#34;\u0026gt; \u0026lt;!--配置DispatcherServlet--\u0026gt; \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;org.springframework.web.servlet.DispatcherServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;!--绑定一个springmvc的配置文件： [servlet-name]-servlet.xml--\u0026gt; \u0026lt;init-param\u0026gt; \u0026lt;param-name\u0026gt;contextConfigLocation\u0026lt;/param-name\u0026gt; \u0026lt;param-value\u0026gt;classpath:springmvc-servlet.xml\u0026lt;/param-value\u0026gt; \u0026lt;/init-param\u0026gt; \u0026lt;!--启动级别 1， 1级表示随着服务器一起启动--\u0026gt; \u0026lt;load-on-startup\u0026gt;1\u0026lt;/load-on-startup\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;!-- / 匹配所有请求（不包括 .jsp)--\u0026gt; \u0026lt;!-- /* 匹配所有请求（包括 .jsp)，若此处使用/*则在视图解析时会再加上.jsp，使页面名变为a.jsp.jsp从而出错--\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt; \u0026lt;/web-app\u0026gt; 在resource下创建springmvc-servlet.xml，如下： \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;!--处理器映射器--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\u0026#34;/\u0026gt; \u0026lt;!--处理器适配器--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter\u0026#34;/\u0026gt; \u0026lt;!--视图解析器--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.view.InternalResourceViewResolver\u0026#34; id=\u0026#34;internalResourceViewResolver\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;prefix\u0026#34; value=\u0026#34;/WEB-INF/jsp/\u0026#34; /\u0026gt; \u0026lt;!--前缀--\u0026gt; \u0026lt;property name=\u0026#34;suffix\u0026#34; value=\u0026#34;.jsp\u0026#34; /\u0026gt; \u0026lt;!--后缀--\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;bean id=\u0026#34;/hello\u0026#34; class=\u0026#34;com.lu.controller.HelloController\u0026#34;/\u0026gt; \u0026lt;/beans\u0026gt; java下创建Controller类 // 实现Controller接口，就是一个控制器，就会获得控制器功能：处理请求并返回一个模型与视图对象 public class HelloController implements Controller { @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception { ModelAndView mv = new ModelAndView(); // 业务代码 String result = \u0026#34;SpringMVC\u0026#34;; mv.addObject(\u0026#34;msg\u0026#34;, result); // 视图跳转 mv.setViewName(\u0026#34;hello\u0026#34;); return mv; } } WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可 SpringMVC执行流程 ","keywords":[],"articleBody":"第一个SpringMVC项目 新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl 新建maven子项目，添加web支持 配置web.xml，注册DispatcherServlet，如下： \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ","wordCount":"699","inLanguage":"en","datePublished":"2021-04-25T14:58:37Z","dateModified":"2021-04-25T14:58:37Z","author":{"@type":"Person","name":"lu"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/java/springmvc%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"lu","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">SpringMVC学习笔记</h1><div class=post-meta><span title='2021-04-25 14:58:37 +0000 UTC'>2021-04-25</span>&nbsp;·&nbsp;699 words&nbsp;·&nbsp;lu</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#第一个springmvc项目>第一个SpringMVC项目</a></li><li><a href=#springmvc执行流程>SpringMVC执行流程</a></li><li><a href=#注解方式开发>注解方式开发</a></li><li><a href=#restful风格>RestFul风格</a></li><li><a href=#请求转发和重定向>请求转发和重定向</a></li><li><a href=#接收请求参数及数据回显>接收请求参数及数据回显</a></li><li><a href=#解决乱码问题>解决乱码问题</a></li><li><a href=#json>Json</a></li><li><a href=#拦截器>拦截器</a></li><li><a href=#文件上传与下载以下代码都是定式要使用时直接取即可>文件上传与下载(以下代码都是定式，要使用时直接取即可)</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=第一个springmvc项目>第一个SpringMVC项目<a hidden class=anchor aria-hidden=true href=#第一个springmvc项目>#</a></h3><ol><li>新建maven父项目，引入依赖：junit，spring-webmvc，servlet-api，jsp-api，jstl</li><li>新建maven子项目，添加web支持</li><li>配置web.xml，注册DispatcherServlet，如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;web-app</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://xmlns.jcp.org/xml/ns/javaee&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>version=</span><span style=color:#e6db74>&#34;4.0&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--配置DispatcherServlet--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;servlet&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;servlet-name&gt;</span>springmvc<span style=color:#f92672>&lt;/servlet-name&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style=color:#f92672>&lt;/servlet-class&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--绑定一个springmvc的配置文件： [servlet-name]-servlet.xml--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;init-param&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;param-name&gt;</span>contextConfigLocation<span style=color:#f92672>&lt;/param-name&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;param-value&gt;</span>classpath:springmvc-servlet.xml<span style=color:#f92672>&lt;/param-value&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/init-param&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--启动级别 1， 1级表示随着服务器一起启动--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;load-on-startup&gt;</span>1<span style=color:#f92672>&lt;/load-on-startup&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/servlet&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- / 匹配所有请求（不包括 .jsp)--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- /* 匹配所有请求（包括 .jsp)，若此处使用/*则在视图解析时会再加上.jsp，使页面名变为a.jsp.jsp从而出错--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;servlet-mapping&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;servlet-name&gt;</span>springmvc<span style=color:#f92672>&lt;/servlet-name&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;url-pattern&gt;</span>/<span style=color:#f92672>&lt;/url-pattern&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/servlet-mapping&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/web-app&gt;</span>
</span></span></code></pre></div><ol start=4><li>在resource下创建springmvc-servlet.xml，如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>       http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--处理器映射器--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--处理器适配器--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--视图解析器--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;internalResourceViewResolver&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;prefix&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;/WEB-INF/jsp/&#34;</span> <span style=color:#f92672>/&gt;</span> <span style=color:#75715e>&lt;!--前缀--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;suffix&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;.jsp&#34;</span> <span style=color:#f92672>/&gt;</span>          <span style=color:#75715e>&lt;!--后缀--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;/hello&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.lu.controller.HelloController&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><ol start=5><li>java下创建Controller类</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 实现Controller接口，就是一个控制器，就会获得控制器功能：处理请求并返回一个模型与视图对象</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HelloController</span> <span style=color:#66d9ef>implements</span> Controller {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ModelAndView <span style=color:#a6e22e>handleRequest</span>(HttpServletRequest request, HttpServletResponse response) <span style=color:#66d9ef>throws</span> Exception {
</span></span><span style=display:flex><span>        ModelAndView mv <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ModelAndView();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 业务代码</span>
</span></span><span style=display:flex><span>        String result <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SpringMVC&#34;</span>;
</span></span><span style=display:flex><span>        mv.<span style=color:#a6e22e>addObject</span>(<span style=color:#e6db74>&#34;msg&#34;</span>, result);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 视图跳转</span>
</span></span><span style=display:flex><span>        mv.<span style=color:#a6e22e>setViewName</span>(<span style=color:#e6db74>&#34;hello&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> mv;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=6><li>WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可</li></ol><hr><h3 id=springmvc执行流程>SpringMVC执行流程<a hidden class=anchor aria-hidden=true href=#springmvc执行流程>#</a></h3><p><img alt=SpringMVC流程 loading=lazy src=/posts/java/springmvc%E7%AC%94%E8%AE%B0/SpringMVC%E6%B5%81%E7%A8%8B.jpg></p><ul><li>下面的执行流程分析以我们在地址栏输入<code>http://localhost:8080/SpringMVC/hello</code>为例。</li></ul><ol><li>DispatcherServlet表示前端控制器，是整个SpringMVC的控制中心。DispatcherServlet拦截并接收用户发出的所有请求</li><li>DispatcherServlet收到用户请求后自动调用HandlerMapping。HandlerMapping是处理器映射，它会根据用户请求的url解析出控制器的名称并返回给DispatcherServlet，如上url解析出控制器名称为hello。HandlerExecution是这一步的实际执行者</li><li>DispatcherServlet再调用HandlerAdapter。HandlerAdapter是处理器适配器，它会根据上一步解析出来的控制器名称找到真正实现了Controller接口的控制器，然后调用控制器执行相应的逻辑并将执行的结果（ModelAndView）返回给DispatcherServlet</li><li>DispatcherServlet调用视图解析器ViewResolver来解析收到的ModelAndView，并将解析的结果返回</li><li>DispatcherServlet根据解析出来的结果调用具体的视图，并呈现给用户</li></ol><p><img alt=详细流程 loading=lazy src=/posts/java/springmvc%E7%AC%94%E8%AE%B0/%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B.png></p><hr><h3 id=注解方式开发>注解方式开发<a hidden class=anchor aria-hidden=true href=#注解方式开发>#</a></h3><ol><li>新建maven项目并添加web支持</li><li>web.xml的内容于上方<u>第一个SpringMVC项目</u>中的web.xml的内容完全相同</li><li>resource下springmvc-servlet.xml的内容如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:mvc=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/mvc&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 配置组件扫描 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:component-scan</span> <span style=color:#a6e22e>base-package=</span><span style=color:#e6db74>&#34;com.lu.controller&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 过滤静态资源 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mvc:default-servlet-handler/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 配置MVC注解驱动
</span></span></span><span style=display:flex><span><span style=color:#75715e>         再spring中一般使用@RequestMapping注解来完成映射关系，要想该注解生效，必须向上下文中注册
</span></span></span><span style=display:flex><span><span style=color:#75715e>         DefaultAnnotationHandlerMapping和AnnotationMethodHandlerAdapter实例，
</span></span></span><span style=display:flex><span><span style=color:#75715e>         这两个实例分别作用于类和方法，而annotation-driven会自动完成上述两个实例的注入 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mvc:annotation-driven/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 配置视图解析器 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;prefix&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;/WEB-INF/jsp/&#34;</span> <span style=color:#f92672>/&gt;</span><span style=color:#75715e>&lt;!-- 前缀 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;suffix&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;.jsp&#34;</span> <span style=color:#f92672>/&gt;</span><span style=color:#75715e>&lt;!-- 后缀 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><ol start=4><li>java下创建控制类</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Controller</span>     <span style=color:#75715e>// 用于组件扫描，代表这个类会被spring接管，且该类中的所有方法若返回字符串，且对应着页面，就跳转，否则不跳转</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/HelloController&#34;</span>)  <span style=color:#75715e>// 处理器映射，即可作用于类也可作用于方法，名称自定义只需与地址栏一致即可</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HelloController</span> {       <span style=color:#75715e>// 可以理解为类是处理器，方法是具体业务</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 如果类前的映射器存在，则该处理器真实访问地址为：项目名/HelloController/hello</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 如果类前的映射器不存在，则该处理器真实访问地址为：项目名/hello</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/hello&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>hello</span>(Model model) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向模型中添加属性，可以在jsp页面取出并渲染</span>
</span></span><span style=display:flex><span>        model.<span style=color:#a6e22e>addAttribute</span>(<span style=color:#e6db74>&#34;msg&#34;</span>, <span style=color:#e6db74>&#34;Hello SpringMVC Annotation!&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回值会被视图解析器处理，即model中的属性会被/WEB-INF/jsp/hello.jsp接收并渲染</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;hello&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=5><li>WEB-INF下的jsp下创建hello.jsp，里面的body中添加${msg}即可</li></ol><hr><h3 id=restful风格>RestFul风格<a hidden class=anchor aria-hidden=true href=#restful风格>#</a></h3><ul><li>特点：<ul><li>简洁：url全部以斜线分割，没有 ？ & 等字符</li><li>高效：支持缓存</li><li>安全：不暴露变量名</li></ul></li></ul><ol><li>RestFul风格的url全部以斜线分割实现：<ul><li>下方程序不使用RestFul风格，则访问时地址为项目名/add?a=2&amp;b=3 的方式传参a和b</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/add&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>normal</span>(<span style=color:#66d9ef>int</span> a, String b, Model model) {
</span></span><span style=display:flex><span>    String res <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>    model.<span style=color:#a6e22e>addAttribute</span>(<span style=color:#e6db74>&#34;msg&#34;</span>, <span style=color:#e6db74>&#34;the result is &#34;</span> <span style=color:#f92672>+</span> res);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;test&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>下方程序使用RestFul风格，则访问时地址为项目名/add/2/3。2和3即为传入的参数。下方方法的参数前加上@PathVariable注解就会使url中的值传递到参数中</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/add/{a}/{b}&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>restful</span>(<span style=color:#a6e22e>@PathVariable</span> <span style=color:#66d9ef>int</span> a, <span style=color:#a6e22e>@PathVariable</span> String b, Model model) {
</span></span><span style=display:flex><span>    String res <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>    model.<span style=color:#a6e22e>addAttribute</span>(<span style=color:#e6db74>&#34;msg&#34;</span>, <span style=color:#e6db74>&#34;the result is &#34;</span> <span style=color:#f92672>+</span> res);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;test&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>在RestFul风格中，用不同的方式请求同一个url会得到不同的结果，如将方法规定为只能使用get方法访问，则通过post或其他方法就不能访问。有如下两种实现方式<ol><li>不好用的繁琐的方式</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 通过为@RequestMapping的键指定值来规定，此使将该方法指定为只能通过get方法访问</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>@RequestMapping</span>(path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/add/{a}/{b}&#34;</span>, method <span style=color:#f92672>=</span> RequestMethod.<span style=color:#a6e22e>GET</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>restful</span>(<span style=color:#a6e22e>@PathVariable</span> <span style=color:#66d9ef>int</span> a, <span style=color:#a6e22e>@PathVariable</span> String b, Model model) {...}
</span></span></code></pre></div><ol start=2><li><strong>一般用这种方法</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//使用@RequestMapping的变体注解实现，此使将该方法指定为只能通过post方法访问</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/add/{a}/{b}&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>restful</span>(<span style=color:#a6e22e>@PathVariable</span> <span style=color:#66d9ef>int</span> a, <span style=color:#a6e22e>@PathVariable</span> String b, Model model) {...}
</span></span></code></pre></div><ul><li>以上两个方法的url完全相同，即访问时输入的地址即使一样，但得到的结果可能不同</li></ul></li></ol><hr><h3 id=请求转发和重定向>请求转发和重定向<a hidden class=anchor aria-hidden=true href=#请求转发和重定向>#</a></h3><ul><li>有视图解析器（正常都有视图解析器）<ul><li>请求转发：请求转发只需按正常方式<code>return "test";</code>然后通过视图解析器就实现了请求转发</li><li>重定向：重定向在返回时需要<code>return "redirect:/index.jsp";</code>。使用重定向时，不触发视图解析器，因此返回的字符串中redirect:后面跟的是资源的真实路径、</li></ul></li><li>没有视图解析器（怎么会没有捏？）没有视图解析器当然就没有了路径拼接，因此返回路径都是真实路径<ul><li>请求转发：return &ldquo;forward:真实路径&rdquo; <code>return "forward:/WEB-INF/jsp/test.jsp";</code></li><li>重定向： return &ldquo;redirect:真实路径&rdquo; <code>return "redirect:/index.jsp";</code></li></ul></li></ul><hr><h3 id=接收请求参数及数据回显>接收请求参数及数据回显<a hidden class=anchor aria-hidden=true href=#接收请求参数及数据回显>#</a></h3><ol><li>处理提交的参数<ul><li>提交的域名称和处理方法的参数名一致时，不需要做任何操作，会直接将参数传入。但是为了提高代码的可读性与后期维护的效率，都建议在参数前加上<code>@RequestParam("username")</code>注解。因此，做如下规定：所有来自前端的参数都必须在参数前加上@RequestParam()注解。</li><li>提交的域名称和处理方法的参数名不一致时，当然需要在方法前添加@RequestParam(&ldquo;username&rdquo;)来指定参数名，此时url中的参数键名必须是username</li><li>当参数是对象时，需要在url中对对象的每个属性进行传参，若url中的键名与对象的属性名相等，则该属性接收到传入的值，否则接收不到</li></ul></li><li>数据显示到前端<ul><li>第一种：ModelAndView</li><li>第二种：Model是精简版，<strong>大部分情况都是用它</strong></li><li>第三种：ModelMap，其继承了LinkedHashMap，功能比Model更强大一些</li></ul></li></ol><hr><h3 id=解决乱码问题>解决乱码问题<a hidden class=anchor aria-hidden=true href=#解决乱码问题>#</a></h3><ul><li>当前端提交表单中有中文时，有可能会产生乱码问题</li><li>tomcat8以上自带解决get方法的乱码问题</li><li>用过滤器解决乱码问题<ol><li>自己写过滤器。在com.lu.filter包下建如下类,在web.xml中添加以下内容</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EncodingFilter</span> <span style=color:#66d9ef>implements</span> Filter {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>(FilterConfig filterConfig) <span style=color:#66d9ef>throws</span> ServletException {}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doFilter</span>(ServletRequest request, ServletResponse response, FilterChain chain) <span style=color:#66d9ef>throws</span> IOException, ServletException {
</span></span><span style=display:flex><span>        request.<span style=color:#a6e22e>setCharacterEncoding</span>(<span style=color:#e6db74>&#34;utf-8&#34;</span>);
</span></span><span style=display:flex><span>        response.<span style=color:#a6e22e>setCharacterEncoding</span>(<span style=color:#e6db74>&#34;utf-8&#34;</span>);
</span></span><span style=display:flex><span>        chain.<span style=color:#a6e22e>doFilter</span>(request, response); <span style=color:#75715e>// 让链继续往下走</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>destroy</span>() {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;filter&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-name&gt;</span>encoding<span style=color:#f92672>&lt;/filter-name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-class&gt;</span>com.lu.filter.EncodingFilter<span style=color:#f92672>&lt;/filter-class&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/filter&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;filter-mapping&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-name&gt;</span>encoding<span style=color:#f92672>&lt;/filter-name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--过滤所有的请求，/* 匹配所有请求（包括 .jsp)，这里用/*--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;url-pattern&gt;</span>/*<span style=color:#f92672>&lt;/url-pattern&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div><ol start=2><li>使用SpringMVC自带的过滤器，在web.xml中添加如下内容即可【<strong>就用这个，安心又省事</strong>】</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;filter&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-name&gt;</span>encoding<span style=color:#f92672>&lt;/filter-name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style=color:#f92672>&lt;/filter-class&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;init-param&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;param-name&gt;</span>encoding<span style=color:#f92672>&lt;/param-name&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;param-value&gt;</span>utf-8<span style=color:#f92672>&lt;/param-value&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/init-param&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/filter&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;filter-mapping&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;filter-name&gt;</span>encoding<span style=color:#f92672>&lt;/filter-name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--过滤所有的请求，/* 匹配所有请求（包括 .jsp)，这里用/*--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;url-pattern&gt;</span>/*<span style=color:#f92672>&lt;/url-pattern&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div></li></ul><hr><h3 id=json>Json<a hidden class=anchor aria-hidden=true href=#json>#</a></h3><ul><li>json是一种文本数据交换格式</li><li>js对象与json对象互相转换的示例如下：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 将js对象转化为json对象,user为js对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>json</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>user</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>json</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 将json对象转化为js对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parse</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>json</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>parse</span>);
</span></span></code></pre></div><ul><li>java程序中返回json格式字符串<ul><li>使用jackson<ul><li>导包，并在springmvc-servlet.xml配置文件中的注解驱动中做如下配置【固定格式】</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;mvc:annotation-driven&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 统一解决中文乱码问题 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mvc:message-converters</span> <span style=color:#a6e22e>register-defaults=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.http.converter.StringHttpMessageConverter&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;objectMapper&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;failOnEmptyBeans&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/mvc:message-converters&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/mvc:annotation-driven&gt;</span>
</span></span></code></pre></div><ul><li>使用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Controller</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// @RestController   加了这个注解后，该类中所有方法的返回值都不会走视图解析器，而是直接返回一个字符串</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserController</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/json&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ResponseBody</span>  <span style=color:#75715e>// 加了这个注解后，返回值就不会走视图解析器，而是直接返回一个字符串</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>json</span>() <span style=color:#66d9ef>throws</span> JsonProcessingException {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// jackson  ObjectMapper</span>
</span></span><span style=display:flex><span>        ObjectMapper mapper <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectMapper();
</span></span><span style=display:flex><span>        User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User(<span style=color:#e6db74>&#34;沁&#34;</span>, 18, <span style=color:#e6db74>&#34;female&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> mapper.<span style=color:#a6e22e>writeValueAsString</span>(user);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li>使用阿里的fastjson<ul><li>前两步和上方一样，其中配置的内容完全一样，使用如下：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/fastjson&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ResponseBody</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>fastJson</span>() {
</span></span><span style=display:flex><span>    User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User(<span style=color:#e6db74>&#34;沁&#34;</span>, 18, <span style=color:#e6db74>&#34;female&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Java对象转json字符串</span>
</span></span><span style=display:flex><span>    String str1 <span style=color:#f92672>=</span> JSON.<span style=color:#a6e22e>toJSONString</span>(user);  <span style=color:#75715e>// 同样适用于List&lt;User&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// json字符串转java对象</span>
</span></span><span style=display:flex><span>    User user_from_jsonStr <span style=color:#f92672>=</span> JSON.<span style=color:#a6e22e>parseObject</span>(str1, User.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// java对象转json对象</span>
</span></span><span style=display:flex><span>    JSONObject jsonObject <span style=color:#f92672>=</span> (JSONObject) JSON.<span style=color:#a6e22e>toJSON</span>(user_from_jsonStr);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// json对象转java对象</span>
</span></span><span style=display:flex><span>    User user_from_json <span style=color:#f92672>=</span> JSON.<span style=color:#a6e22e>toJavaObject</span>(jsonObject, User.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> str1;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul></li></ul><hr><p>smm整合项目看源文件吧，太多没法贴</p><hr><h3 id=拦截器>拦截器<a hidden class=anchor aria-hidden=true href=#拦截器>#</a></h3><ul><li>SpringMVC的拦截器类似于Servlet的过滤器，用于对处理器进行预处理和后处理</li><li>过滤器与拦截器的区别：拦截器是AOP思想的具体实现</li><li>拦截器只拦截控制器，不拦截静态文件</li><li>一个类继承了HandlerInterceptor接口，这个类就成为了拦截器，如下：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyInterceptor</span> <span style=color:#66d9ef>implements</span> HandlerInterceptor {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 在控制器执行之前执行，如果返回true，则该拦截器放行，继续执行下一个拦截器；如果返回false，则该拦截器不放行，无法执行控制器。</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>preHandle</span>(HttpServletRequest request, HttpServletResponse response, Object handler) <span style=color:#66d9ef>throws</span> Exception {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HandlerInterceptor.<span style=color:#a6e22e>super</span>.<span style=color:#a6e22e>preHandle</span>(request, response, handler);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 在控制器之后执行，用于日志，可以不写</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>postHandle</span>(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) <span style=color:#66d9ef>throws</span> Exception {
</span></span><span style=display:flex><span>        HandlerInterceptor.<span style=color:#a6e22e>super</span>.<span style=color:#a6e22e>postHandle</span>(request, response, handler, modelAndView);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 清理，可以不写</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>afterCompletion</span>(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) <span style=color:#66d9ef>throws</span> Exception {
</span></span><span style=display:flex><span>        HandlerInterceptor.<span style=color:#a6e22e>super</span>.<span style=color:#a6e22e>afterCompletion</span>(request, response, handler, ex);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>在mvc层配置拦截器，如下：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--拦截器配置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;mvc:interceptors&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mvc:interceptor&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- /** 表示/下的所有请求 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;mvc:mapping</span> <span style=color:#a6e22e>path=</span><span style=color:#e6db74>&#34;/**&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.lu.config.MyInterceptor&#34;</span><span style=color:#f92672>/&gt;</span> <span style=color:#75715e>&lt;!--拦截器的位置--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/mvc:interceptor&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/mvc:interceptors&gt;</span>
</span></span></code></pre></div><hr><h3 id=文件上传与下载以下代码都是定式要使用时直接取即可>文件上传与下载(以下代码都是定式，要使用时直接取即可)<a hidden class=anchor aria-hidden=true href=#文件上传与下载以下代码都是定式要使用时直接取即可>#</a></h3><ol><li>导包 commons-fileupload</li><li>在mvc层配置文件上传，如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--文件上传配置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;multipartResolver&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 请求的编码格式，必须与jsp的pageEncoding属性一致，以便正确读取表单的内容，默认为ISO-8859-1 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;defaultEncoding&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;utf-8&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--文件上传大小上限，单位为字节（10485760==10M），下方两项可以不配--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;maxUploadSize&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;10485760&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;maxInMemorySize&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;40960&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div><ol start=3><li>在前端页面写如下内容：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;${pageContext.request.contextPath}/upload&#34;</span> <span style=color:#a6e22e>enctype</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;multipart/form-data&#34;</span> <span style=color:#a6e22e>method</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;file&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;file&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;submit&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;upload&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>form</span>&gt;
</span></span></code></pre></div><ol start=4><li>控制器中控制逻辑如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/upload&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>fileUpload</span>(<span style=color:#a6e22e>@RequestParam</span>(<span style=color:#e6db74>&#34;file&#34;</span>) CommonsMultipartFile file, HttpServletRequest request) <span style=color:#66d9ef>throws</span> IOException {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 上传路径保存设置</span>
</span></span><span style=display:flex><span>    String path <span style=color:#f92672>=</span> request.<span style=color:#a6e22e>getContextPath</span>();
</span></span><span style=display:flex><span>    File localFile <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(path);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>localFile.<span style=color:#a6e22e>exists</span>())
</span></span><span style=display:flex><span>        localFile.<span style=color:#a6e22e>mkdir</span>();
</span></span><span style=display:flex><span>    file.<span style=color:#a6e22e>transferTo</span>(<span style=color:#66d9ef>new</span> File(localFile <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>+</span>file.<span style=color:#a6e22e>getOriginalFilename</span>()));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:index.jsp&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/java/mybatis%E7%AC%94%E8%AE%B0/><span class=title>« Prev</span><br><span>mybatis学习笔记</span>
</a><a class=next href=http://localhost:1313/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/markdown/><span class=title>Next »</span><br><span>MarkDown无法显示本地图片</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>lu</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>