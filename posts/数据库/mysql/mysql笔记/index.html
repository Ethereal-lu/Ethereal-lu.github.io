<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MySQL概述 | lu</title>
<meta name=keywords content><meta name=description content="基本命令

show columns from user == describe user == desc user查询user表的结构
sql的注释为两个杠 --，多行注释为/*  */
创建表：

-- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范
CREATE TABLE IF NOT EXISTS `user` (   -- IF NOT EXISTS 为可选
  -- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义
  `id` int NOT NULL AUTO_INCREMENT COMMENT '学号',   
  `name` varchar(30) DEFAULT NULL COMMENT '名字',
  `birthday` DATETIME DEFAULT NULL COMMENT '出生日期', 
  `passwd` varchar(30) DEFAULT NULL COMMENT '密码',
  `perms` varchar(100) NOT NULL DEFAULT 'normal' COMMENT '权限',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8  -- 显示声明引擎和默认字符集（可在my.ini中修改）
-- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、
					-- gmt_modified（修改时间）

修改表

ALTER TABLE teacher RENAME AS teacher1    -- 修改表名
ALTER TABLE teacher ADD age INT           -- 添加字段
ALTER TABLE teacher MODIFY age VARCHAR(11)    -- 修改字段的约束
ALTER TABLE teacher CHANGE 旧名 新名 INT   -- 修改字段名（可以同时修改约束）
ALTER TABLE teacher DROP age              -- 删除字段

删除表

DROP TABLE IF EXISTS teacher              -- 加上判断的删除

查看相关历史命令语句

SHOW CREATE DATABASE mybatis -- 查看创建数据库的语句
SHOW CREATE TABLE `user`     -- 查看创建数据表的语句

数据表类型（引擎）

MYISAM   早期使用          InnoDB 默认使用


  
      
          
          MYISAM
          InnoDB
      
  
  
      
          事务支持
          不支持
          支持
      
      
          数据行锁定
          不支持
          支持
      
      
          外键约束
          不支持
          支持
      
      
          全文检索
          支持
          现在支持
      
      
          表空间大小
          较小
          较大，约两倍
      
  


主要区别

MYISAM   节约空间，速度较快
InnoDB     安全性高，支持事务，多表多用户操作




数据管理

DDL，Data Definition Language，数据库定义语言
用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE
DML，Data Manipulation Language，数据库操作语言
SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK
DCL，Data Control Language，数据库控制语言
用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION


delete和truncate的区别
TRUNCATE student == DELETE FROM student 清空表内容"><meta name=author content="lu"><link rel=canonical href=https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/><link crossorigin=anonymous href=/assets/css/stylesheet.d72444526d7ecbdb0015438a7fa89054a658bf759d0542e2e5df81ce94b493ee.css integrity="sha256-1yREUm1+y9sAFUOKf6iQVKZYv3WdBULi5d+BzpS0k+4=" rel="preload stylesheet" as=style><link rel=icon href=https://ethereal-lu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ethereal-lu.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ethereal-lu.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ethereal-lu.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ethereal-lu.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="lu"><meta property="og:title" content="MySQL概述"><meta property="og:description" content="基本命令 show columns from user == describe user == desc user查询user表的结构 sql的注释为两个杠 --，多行注释为/* */ 创建表： -- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范 CREATE TABLE IF NOT EXISTS `user` ( -- IF NOT EXISTS 为可选 -- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义 `id` int NOT NULL AUTO_INCREMENT COMMENT '学号', `name` varchar(30) DEFAULT NULL COMMENT '名字', `birthday` DATETIME DEFAULT NULL COMMENT '出生日期', `passwd` varchar(30) DEFAULT NULL COMMENT '密码', `perms` varchar(100) NOT NULL DEFAULT 'normal' COMMENT '权限', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 -- 显示声明引擎和默认字符集（可在my.ini中修改） -- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、 -- gmt_modified（修改时间） 修改表 ALTER TABLE teacher RENAME AS teacher1 -- 修改表名 ALTER TABLE teacher ADD age INT -- 添加字段 ALTER TABLE teacher MODIFY age VARCHAR(11) -- 修改字段的约束 ALTER TABLE teacher CHANGE 旧名 新名 INT -- 修改字段名（可以同时修改约束） ALTER TABLE teacher DROP age -- 删除字段 删除表 DROP TABLE IF EXISTS teacher -- 加上判断的删除 查看相关历史命令语句 SHOW CREATE DATABASE mybatis -- 查看创建数据库的语句 SHOW CREATE TABLE `user` -- 查看创建数据表的语句 数据表类型（引擎） MYISAM 早期使用 InnoDB 默认使用 MYISAM InnoDB 事务支持 不支持 支持 数据行锁定 不支持 支持 外键约束 不支持 支持 全文检索 支持 现在支持 表空间大小 较小 较大，约两倍 主要区别 MYISAM 节约空间，速度较快 InnoDB 安全性高，支持事务，多表多用户操作 数据管理 DDL，Data Definition Language，数据库定义语言 用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE DML，Data Manipulation Language，数据库操作语言 SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK DCL，Data Control Language，数据库控制语言 用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION delete和truncate的区别 TRUNCATE student == DELETE FROM student 清空表内容"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-22T17:39:41+00:00"><meta property="article:modified_time" content="2021-05-22T17:39:41+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="MySQL概述"><meta name=twitter:description content="基本命令

show columns from user == describe user == desc user查询user表的结构
sql的注释为两个杠 --，多行注释为/*  */
创建表：

-- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范
CREATE TABLE IF NOT EXISTS `user` (   -- IF NOT EXISTS 为可选
  -- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义
  `id` int NOT NULL AUTO_INCREMENT COMMENT '学号',   
  `name` varchar(30) DEFAULT NULL COMMENT '名字',
  `birthday` DATETIME DEFAULT NULL COMMENT '出生日期', 
  `passwd` varchar(30) DEFAULT NULL COMMENT '密码',
  `perms` varchar(100) NOT NULL DEFAULT 'normal' COMMENT '权限',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8  -- 显示声明引擎和默认字符集（可在my.ini中修改）
-- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、
					-- gmt_modified（修改时间）

修改表

ALTER TABLE teacher RENAME AS teacher1    -- 修改表名
ALTER TABLE teacher ADD age INT           -- 添加字段
ALTER TABLE teacher MODIFY age VARCHAR(11)    -- 修改字段的约束
ALTER TABLE teacher CHANGE 旧名 新名 INT   -- 修改字段名（可以同时修改约束）
ALTER TABLE teacher DROP age              -- 删除字段

删除表

DROP TABLE IF EXISTS teacher              -- 加上判断的删除

查看相关历史命令语句

SHOW CREATE DATABASE mybatis -- 查看创建数据库的语句
SHOW CREATE TABLE `user`     -- 查看创建数据表的语句

数据表类型（引擎）

MYISAM   早期使用          InnoDB 默认使用


  
      
          
          MYISAM
          InnoDB
      
  
  
      
          事务支持
          不支持
          支持
      
      
          数据行锁定
          不支持
          支持
      
      
          外键约束
          不支持
          支持
      
      
          全文检索
          支持
          现在支持
      
      
          表空间大小
          较小
          较大，约两倍
      
  


主要区别

MYISAM   节约空间，速度较快
InnoDB     安全性高，支持事务，多表多用户操作




数据管理

DDL，Data Definition Language，数据库定义语言
用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE
DML，Data Manipulation Language，数据库操作语言
SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK
DCL，Data Control Language，数据库控制语言
用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION


delete和truncate的区别
TRUNCATE student == DELETE FROM student 清空表内容"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ethereal-lu.github.io/posts/"},{"@type":"ListItem","position":2,"name":"MySQL概述","item":"https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MySQL概述","name":"MySQL概述","description":"基本命令 show columns from user == describe user == desc user查询user表的结构 sql的注释为两个杠 --，多行注释为/* */ 创建表： -- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范 CREATE TABLE IF NOT EXISTS `user` ( -- IF NOT EXISTS 为可选 -- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义 `id` int NOT NULL AUTO_INCREMENT COMMENT \u0026#39;学号\u0026#39;, `name` varchar(30) DEFAULT NULL COMMENT \u0026#39;名字\u0026#39;, `birthday` DATETIME DEFAULT NULL COMMENT \u0026#39;出生日期\u0026#39;, `passwd` varchar(30) DEFAULT NULL COMMENT \u0026#39;密码\u0026#39;, `perms` varchar(100) NOT NULL DEFAULT \u0026#39;normal\u0026#39; COMMENT \u0026#39;权限\u0026#39;, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 -- 显示声明引擎和默认字符集（可在my.ini中修改） -- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、 -- gmt_modified（修改时间） 修改表 ALTER TABLE teacher RENAME AS teacher1 -- 修改表名 ALTER TABLE teacher ADD age INT -- 添加字段 ALTER TABLE teacher MODIFY age VARCHAR(11) -- 修改字段的约束 ALTER TABLE teacher CHANGE 旧名 新名 INT -- 修改字段名（可以同时修改约束） ALTER TABLE teacher DROP age -- 删除字段 删除表 DROP TABLE IF EXISTS teacher -- 加上判断的删除 查看相关历史命令语句 SHOW CREATE DATABASE mybatis -- 查看创建数据库的语句 SHOW CREATE TABLE `user` -- 查看创建数据表的语句 数据表类型（引擎） MYISAM 早期使用 InnoDB 默认使用 MYISAM InnoDB 事务支持 不支持 支持 数据行锁定 不支持 支持 外键约束 不支持 支持 全文检索 支持 现在支持 表空间大小 较小 较大，约两倍 主要区别 MYISAM 节约空间，速度较快 InnoDB 安全性高，支持事务，多表多用户操作 数据管理 DDL，Data Definition Language，数据库定义语言 用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE DML，Data Manipulation Language，数据库操作语言 SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK DCL，Data Control Language，数据库控制语言 用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION delete和truncate的区别 TRUNCATE student == DELETE FROM student 清空表内容\n","keywords":[],"articleBody":"基本命令 show columns from user == describe user == desc user查询user表的结构 sql的注释为两个杠 --，多行注释为/* */ 创建表： -- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范 CREATE TABLE IF NOT EXISTS `user` ( -- IF NOT EXISTS 为可选 -- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义 `id` int NOT NULL AUTO_INCREMENT COMMENT '学号', `name` varchar(30) DEFAULT NULL COMMENT '名字', `birthday` DATETIME DEFAULT NULL COMMENT '出生日期', `passwd` varchar(30) DEFAULT NULL COMMENT '密码', `perms` varchar(100) NOT NULL DEFAULT 'normal' COMMENT '权限', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 -- 显示声明引擎和默认字符集（可在my.ini中修改） -- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、 -- gmt_modified（修改时间） 修改表 ALTER TABLE teacher RENAME AS teacher1 -- 修改表名 ALTER TABLE teacher ADD age INT -- 添加字段 ALTER TABLE teacher MODIFY age VARCHAR(11) -- 修改字段的约束 ALTER TABLE teacher CHANGE 旧名 新名 INT -- 修改字段名（可以同时修改约束） ALTER TABLE teacher DROP age -- 删除字段 删除表 DROP TABLE IF EXISTS teacher -- 加上判断的删除 查看相关历史命令语句 SHOW CREATE DATABASE mybatis -- 查看创建数据库的语句 SHOW CREATE TABLE `user` -- 查看创建数据表的语句 数据表类型（引擎） MYISAM 早期使用 InnoDB 默认使用 MYISAM InnoDB 事务支持 不支持 支持 数据行锁定 不支持 支持 外键约束 不支持 支持 全文检索 支持 现在支持 表空间大小 较小 较大，约两倍 主要区别 MYISAM 节约空间，速度较快 InnoDB 安全性高，支持事务，多表多用户操作 数据管理 DDL，Data Definition Language，数据库定义语言 用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE DML，Data Manipulation Language，数据库操作语言 SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK DCL，Data Control Language，数据库控制语言 用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION delete和truncate的区别 TRUNCATE student == DELETE FROM student 清空表内容\nDELETE 会一行一行地删除，产生大量事务日志。 TRUNCATE 速度快；TRUNCATE之后的自增字段从头开始计数，而DELETE的仍保留原来的最大数值 truncate和delete只删除数据，而drop则删除整个表（结构和数据）。 查询数据 SELECT完整语法（注意顺序，不能错） SELECT [ALL|DISTINCT] {* | talbe.* | [table.]field1[AS alias1][,[table.]field2[AS alias2][,…]]} FROM table_name [as table_alias] [left | right | inner join table_name2] [WHERE…] [GROUP BY…[HAVING…]] [ORDER BY…[ASC|DESC]] -- 用中括号([])括起来的部分表示是可选的，用大括号({})括起来的部分是表示必须从中选择其中的一个。 起别名：字段名和表名都可以起别名 SELECT `id` AS 学号, `name` AS 名字 FROM student AS 学生表 函数 concat(a, b) 拼接。如下语句的查询结果为“ 姓名：驯鹿 ” SELECT CONCAT('姓名：', name) FROM student 去重：对查询的结果进行去重 SELECT DISTINCT `id` FROM student -- 若表中id字段有多个相同值，则只显示一个 其他操作：SELECT后可以跟文本值、字段、null、函数、计算表达式、系统变量…… SELECT VERSION() -- 查询SQL版本 SELECT 2 * 3 + 6 AS 计算结果 -- 计算 逻辑运算符：与或非 -- 成绩在95到100之间 (与) SELECT id, `name`, grade FROM student WHERE grade BETWEEN 95 AND 100 -- 成绩大于95或小于60 SELECT id, `name`, grade FROM student WHERE grade \u003e= 95 OR grade \u003c= 60 -- 学号不等于10 （非） SELECT id, `name`, grade FROM student WHERE NOT id = 10 -- 注意：相等只有一个等号 模糊查询：like 模糊查询是利用“_”表示单个字符和“%”表示任意个字符进行匹配的。 SELECT 字段 FROM 表 WHERE 某字段 Like 条件 -- 模糊查询一般格式 -- 1、% ：表示任意0个或多个字符。可匹配任意类型和长度的字符，ASCII下若是中文，请使用两个百分号（%%）表示。 SELECT * FROM student WHERE name LIKE '%三%' -- 2、_ ： 表示任意单个字符。 SELECT * FROM student WHERE name LIKE '_三_' -- 3、[ ] ：表示括号内所列字符中的一个（类似正则表达式）。 SELECT * FROM student WHERE name LIKE '[张李王]三' -- 4、[^ ] ：表示不在括号所列之内的单个字符。 SELECT * FROM student WHERE name LIKE '[^张李王]三' -- 5、查询内容包含通配符时，通配符前用\\转义 类似模糊查询：in、is null（为空）、is not null（不为空）、betweent and（在…之间） in类似于上方模糊查询第三条 SELECT * FROM student WHERE age IN (18, 19, 20) -- 年龄为18或19或20 联表查询（从多张表中查数据） 数据库在通过连接两张或多张表来返回记录时，都会生成一张中间的临时表，然后再将这张临时表返回给用户。 on和where的区别： on 条件是在生成临时表时使用的条件。不满足on条件的元组的属性值被置为null，但不会删除该元组 where 条件是在临时表生成后，再对临时表进行过滤的条件。不满足where条件的元组直接删除 七种join理论\n内连接：两表的交集 SELECT * FROM tab1 INNER JOIN tab2 WHERE tab1.size = tab2.size 左连接：左独有 SELECT * FROM tab1 LEFT JOIN tab2 ON (tab1.size = tab2.size) WHERE tab2.size IS NULL 右连接：右独有 SELECT * FROM tab1 RIGHT JOIN tab2 ON (tab1.size = tab2.size) WHERE tab1.size IS NULL 左外连接：左都有，右不满足的为null SELECT * FROM tab1 LEFT JOIN tab2 ON (tab1.size = tab2.size) 右外连接：右都有，左不满足的为null SELECT * FROM tab1 RIGHT JOIN tab2 ON (tab1.size = tab2.size) 全外连接：并集 SELECT * FROM tab1 LEFT JOIN tab2 ON (tab1.size = tab2.size) UNION SELECT * FROM tab1 RIGHT JOIN tab2 ON (tab1.size = tab2.size) 两表独有的数据集：左连接和右连接的并 SELECT * FROM tab1 LEFT JOIN tab2 ON (tab1.size = tab2.size) WHERE tab2.size IS NULL UNION SELECT * FROM `tab1` RIGHT JOIN `tab2` ON (tab1.size = tab2.size) WHERE tab1.size IS NULL 分页和排序\n排序：ASC升序、DESC降序 SELECT * FROM student ORDER BY grade ASC -- 升序（默认） SELECT * FROM student ORDER BY grade ASC -- 降序 分页：语法select * from user limit 起始项， 页大小 嵌套查询（子查询）\n函数 常用函数（许多与Java相同，用到时查）\n聚合函数（用的多）\n加密函数（如AES、MD5、SHA等）\nINSERT INTO `user` VALUES (1, xunlu, MD5(123456)) -- 对密码进行MD5加密 事务 概念 ACID特性 原子性（Atomicity）原子性是指事务包括的所有操作要么成功，要么全部失败回滚 一致性（Consistency） 事务执行之前和执行之后都必须处于一致性状态。举例来说，假设用户A和用户B两者的钱加起来一共是1000，那么不管A和B之间如何转账、转几次账，事务结束后两个用户的钱相加起来应该还得是1000，这就是事务的一致性。 隔离性（Isolation）多个并发事务之间要相互隔离 持久性（Durability）事务一旦被提交了，对数据库中的数据是永久性的 索引 分类： 普通索引：这是最基本的索引，它没有任何限制。普通索引（由关键字KEY或INDEX定义的索引）的唯一任务是加快对数据的访问速度。因此，应该只为那些最经常出现在查询条件(WHERE column = …)或排序条件(ORDER BY column)中的数据列创建索引。（一张表可以有多个） 唯一索引：它与前面的普通索引类似，不同的就是：普通索引允许被索引的数据列包含重复的值。而唯一索引列的值必须唯一，但允许有空值。（一张表可以有多个） 主键索引：它是一种特殊的唯一索引，不允许有空值。一个表只能有一个主键。（一张表只能有一个） 全文索引：全文索引是一个特殊索引类型，它查找的是文本中的关键词，主要用于全文检索。 索引设置原则 索引不是越多越好 不要对经常变动的数据增加索引 小数据量的表不需要索引 索引一般加在常用来查询的字段上 [索引的数据结构](CodingLabs - MySQL索引背后的数据结构及算法原理) 权限管理和备份 用户管理 CREATE USER 用户名 IDENTIFIED BY '密码' -- 创建用户 SET PASSWORD = PASSWORD('new password') -- 修改当前用户的密码 SET PASSWORD FOR 用户名 = PASSWORD('new password') -- 修改指定用户的密码 RENAME USER 旧用户名 TO 新用户名 -- 重命名 GRANT 权限名 ON 表名 TO 用户名 -- 授权 SHOW GRANTS FOR 用户名\t-- 查看用户权限 REVOKE 权限名 ON 表名 FROM 用户名 -- 撤销权限 备份：备份物理文件、用可视化工具备份、命令行备份（mysqldump命令） 设计规范 整数用 bigint(11)，用于做标志的整数用 tinyint(1)，created_time 和 modified_time。\n","wordCount":"661","inLanguage":"en","datePublished":"2021-05-22T17:39:41Z","dateModified":"2021-05-22T17:39:41Z","author":{"@type":"Person","name":"lu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"lu","logo":{"@type":"ImageObject","url":"https://ethereal-lu.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ethereal-lu.github.io/ accesskey=h title="lu (Alt + H)">lu</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ethereal-lu.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://ethereal-lu.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ethereal-lu.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ethereal-lu.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">MySQL概述</h1><div class=post-meta><span title='2021-05-22 17:39:41 +0000 UTC'>2021-05-22</span>&nbsp;·&nbsp;661 words&nbsp;·&nbsp;lu</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#基本命令>基本命令</a></li><li><a href=#数据表类型引擎>数据表类型（引擎）</a></li><li><a href=#数据管理>数据管理</a></li><li><a href=#delete和truncate的区别>delete和truncate的区别</a></li><li><a href=#查询数据>查询数据</a></li><li><a href=#函数>函数</a></li><li><a href=#事务>事务</a></li><li><a href=#索引>索引</a></li><li><a href=#权限管理和备份>权限管理和备份</a></li><li><a href=#设计规范>设计规范</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=基本命令>基本命令<a hidden class=anchor aria-hidden=true href=#基本命令>#</a></h3><ul><li><code>show columns from user</code> == <code>describe user</code> == <code>desc user</code>查询user表的结构</li><li>sql的注释为两个杠 <code>--</code>，多行注释为/* */</li><li>创建表：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- 表明和字段名用反引号引起来是为了防止与sql的关键字相同，更规范
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>EXISTS</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`</span> (   <span style=color:#75715e>-- IF NOT EXISTS 为可选
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>-- COMMENT 为注释，在表中看不到，但是调出创建表的命令时，可以直观看到字段的含义
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> int <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> AUTO_INCREMENT <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;学号&#39;</span>,   
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>30</span>) <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;名字&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>birthday<span style=color:#f92672>`</span> DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;出生日期&#39;</span>, 
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>passwd<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>30</span>) <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;密码&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>perms<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>100</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;normal&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;权限&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>)
</span></span><span style=display:flex><span>) ENGINE<span style=color:#f92672>=</span>InnoDB <span style=color:#66d9ef>DEFAULT</span> CHARSET<span style=color:#f92672>=</span>utf8  <span style=color:#75715e>-- 显示声明引擎和默认字符集（可在my.ini中修改）
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- 真实开发中还需要有，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>					<span style=color:#75715e>-- gmt_modified（修改时间）
</span></span></span></code></pre></div><ul><li>修改表</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> teacher <span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>AS</span> teacher1    <span style=color:#75715e>-- 修改表名
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> teacher <span style=color:#66d9ef>ADD</span> age INT           <span style=color:#75715e>-- 添加字段
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> teacher <span style=color:#66d9ef>MODIFY</span> age VARCHAR(<span style=color:#ae81ff>11</span>)    <span style=color:#75715e>-- 修改字段的约束
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> teacher CHANGE <span style=color:#960050;background-color:#1e0010>旧名</span> <span style=color:#960050;background-color:#1e0010>新名</span> INT   <span style=color:#75715e>-- 修改字段名（可以同时修改约束）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> teacher <span style=color:#66d9ef>DROP</span> age              <span style=color:#75715e>-- 删除字段
</span></span></span></code></pre></div><ul><li>删除表</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span> teacher              <span style=color:#75715e>-- 加上判断的删除
</span></span></span></code></pre></div><ul><li>查看相关历史命令语句</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> mybatis <span style=color:#75715e>-- 查看创建数据库的语句
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`</span>     <span style=color:#75715e>-- 查看创建数据表的语句
</span></span></span></code></pre></div><hr><h3 id=数据表类型引擎>数据表类型（引擎）<a hidden class=anchor aria-hidden=true href=#数据表类型引擎>#</a></h3><ul><li>MYISAM 早期使用 InnoDB 默认使用</li></ul><table><thead><tr><th></th><th>MYISAM</th><th>InnoDB</th></tr></thead><tbody><tr><td>事务支持</td><td>不支持</td><td>支持</td></tr><tr><td>数据行锁定</td><td>不支持</td><td>支持</td></tr><tr><td>外键约束</td><td>不支持</td><td>支持</td></tr><tr><td>全文检索</td><td>支持</td><td>现在支持</td></tr><tr><td>表空间大小</td><td>较小</td><td>较大，约两倍</td></tr></tbody></table><ul><li>主要区别<ul><li>MYISAM 节约空间，速度较快</li><li>InnoDB 安全性高，支持事务，多表多用户操作</li></ul></li></ul><hr><h3 id=数据管理>数据管理<a hidden class=anchor aria-hidden=true href=#数据管理>#</a></h3><ul><li><strong>DDL</strong>，Data Definition Language，数据库定义语言
用于定义和管理数据库所有对象的语言，包括：CREATE，ALERT，DROP，TRUNCATE</li><li><strong>DML</strong>，Data Manipulation Language，数据库操作语言
SQL中处理数据等操作，包括：SELECT，INSERT，UPDATE，DELETE，CALL，EXPLAIN PLAN，LOCK</li><li><strong>DCL</strong>，Data Control Language，数据库控制语言
用来授予或回收访问数据库和某种特权并控制数据库操纵事务发生的时间及效果，对数据库实行监控，包括：COMMIT，SAVEPOINT，ROLLBACK，SET TRANSACTION</li></ul><hr><h3 id=delete和truncate的区别>delete和truncate的区别<a hidden class=anchor aria-hidden=true href=#delete和truncate的区别>#</a></h3><p><code>TRUNCATE student</code> == <code>DELETE FROM student</code> 清空表内容</p><ul><li>DELETE 会一行一行地删除，产生大量事务日志。</li><li>TRUNCATE 速度快；TRUNCATE之后的自增字段从头开始计数，而DELETE的仍保留原来的最大数值</li><li>truncate和delete只删除数据，而drop则删除整个表（结构和数据）。</li></ul><hr><h3 id=查询数据>查询数据<a hidden class=anchor aria-hidden=true href=#查询数据>#</a></h3><ul><li>SELECT完整语法（注意顺序，不能错）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> [<span style=color:#66d9ef>ALL</span><span style=color:#f92672>|</span><span style=color:#66d9ef>DISTINCT</span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{</span><span style=color:#f92672>*</span> <span style=color:#f92672>|</span> talbe.<span style=color:#f92672>*</span> <span style=color:#f92672>|</span> [<span style=color:#66d9ef>table</span>.]field1[<span style=color:#66d9ef>AS</span> alias1][,[<span style=color:#66d9ef>table</span>.]field2[<span style=color:#66d9ef>AS</span> alias2][,<span style=color:#960050;background-color:#1e0010>…</span>]]<span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span> [<span style=color:#66d9ef>as</span> table_alias]
</span></span><span style=display:flex><span>	[<span style=color:#66d9ef>left</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>right</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>inner</span> <span style=color:#66d9ef>join</span> table_name2]
</span></span><span style=display:flex><span>    [<span style=color:#66d9ef>WHERE</span><span style=color:#960050;background-color:#1e0010>…</span>]
</span></span><span style=display:flex><span>    [<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span><span style=color:#960050;background-color:#1e0010>…</span>[<span style=color:#66d9ef>HAVING</span><span style=color:#960050;background-color:#1e0010>…</span>]]
</span></span><span style=display:flex><span>    [<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span><span style=color:#960050;background-color:#1e0010>…</span>[<span style=color:#66d9ef>ASC</span><span style=color:#f92672>|</span><span style=color:#66d9ef>DESC</span>]]
</span></span><span style=display:flex><span><span style=color:#75715e>-- 用中括号([])括起来的部分表示是可选的，用大括号({})括起来的部分是表示必须从中选择其中的一个。
</span></span></span></code></pre></div><ul><li>起别名：字段名和表名都可以起别名</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>学号</span>, <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>名字</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>学生表</span>
</span></span></code></pre></div><ul><li>函数 concat(a, b) 拼接。如下语句的查询结果为“ 姓名：驯鹿 ”</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> CONCAT(<span style=color:#e6db74>&#39;姓名：&#39;</span>, name) <span style=color:#66d9ef>FROM</span> student
</span></span></code></pre></div><ul><li>去重：对查询的结果进行去重</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> <span style=color:#66d9ef>FROM</span> student    <span style=color:#75715e>-- 若表中id字段有多个相同值，则只显示一个
</span></span></span></code></pre></div><ul><li>其他操作：SELECT后可以跟文本值、字段、null、函数、计算表达式、系统变量&mldr;&mldr;</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>VERSION</span>()                     <span style=color:#75715e>-- 查询SQL版本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span> <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>计算结果</span>          <span style=color:#75715e>-- 计算
</span></span></span></code></pre></div><ul><li>逻辑运算符：与或非</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- 成绩在95到100之间 (与)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> id, <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span>, grade <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> grade <span style=color:#66d9ef>BETWEEN</span> <span style=color:#ae81ff>95</span> <span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 成绩大于95或小于60
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> id, <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span>, grade <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> grade <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>95</span> <span style=color:#66d9ef>OR</span> grade <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 学号不等于10  （非）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> id, <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span>, grade <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>NOT</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>   <span style=color:#75715e>-- 注意：相等只有一个等号
</span></span></span></code></pre></div><ul><li>模糊查询：like<ul><li>模糊查询是利用“_”表示单个字符和“%”表示任意个字符进行匹配的。</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>字段</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>某字段</span> <span style=color:#66d9ef>Like</span> <span style=color:#960050;background-color:#1e0010>条件</span>      <span style=color:#75715e>-- 模糊查询一般格式
</span></span></span><span style=display:flex><span><span style=color:#75715e>-- 1、% ：表示任意0个或多个字符。可匹配任意类型和长度的字符，ASCII下若是中文，请使用两个百分号（%%）表示。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%三%&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 2、_ ： 表示任意单个字符。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;_三_&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 3、[ ] ：表示括号内所列字符中的一个（类似正则表达式）。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;[张李王]三&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 4、[^ ] ：表示不在括号所列之内的单个字符。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;[^张李王]三&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 5、查询内容包含通配符时，通配符前用\转义
</span></span></span></code></pre></div><ul><li>类似模糊查询：in、is null（为空）、is not null（不为空）、betweent and（在&mldr;之间）<ul><li>in类似于上方模糊查询第三条</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>WHERE</span> age <span style=color:#66d9ef>IN</span> (<span style=color:#ae81ff>18</span>, <span style=color:#ae81ff>19</span>, <span style=color:#ae81ff>20</span>)   <span style=color:#75715e>-- 年龄为18或19或20
</span></span></span></code></pre></div><ul><li><strong>联表查询</strong>（从多张表中查数据）<ul><li>数据库在通过连接两张或多张表来返回记录时，都会生成一张中间的临时表，然后再将这张临时表返回给用户。</li><li>on和where的区别：<ul><li><strong>on</strong> 条件是在<strong>生成</strong>临时表<strong>时</strong>使用的条件。不满足on条件的元组的属性值被置为null，但不会删除该元组</li><li><strong>where</strong> 条件是在临时表<strong>生成后</strong>，再对临时表进行过滤的条件。不满足where条件的元组直接删除</li></ul></li></ul></li></ul><p><img alt=七种join理论 loading=lazy src=/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/%E4%B8%83%E7%A7%8Djoin%E7%90%86%E8%AE%BA.png></p><ul><li><p>七种join理论</p><ul><li>内连接：两表的交集</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>WHERE</span> tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>
</span></span></code></pre></div><ul><li>左连接：左独有</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>) <span style=color:#66d9ef>WHERE</span> tab2.<span style=color:#66d9ef>size</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>
</span></span></code></pre></div><ul><li>右连接：右独有</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>RIGHT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>) <span style=color:#66d9ef>WHERE</span> tab1.<span style=color:#66d9ef>size</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>
</span></span></code></pre></div><ul><li>左外连接：左都有，右不满足的为null</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>)
</span></span></code></pre></div><ul><li>右外连接：右都有，左不满足的为null</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>RIGHT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>)
</span></span></code></pre></div><ul><li>全外连接：并集</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>RIGHT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>)
</span></span></code></pre></div><ul><li>两表独有的数据集：左连接和右连接的并</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tab1 <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> tab2 <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>) <span style=color:#66d9ef>WHERE</span> tab2.<span style=color:#66d9ef>size</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#f92672>`</span>tab1<span style=color:#f92672>`</span> <span style=color:#66d9ef>RIGHT</span> <span style=color:#66d9ef>JOIN</span> <span style=color:#f92672>`</span>tab2<span style=color:#f92672>`</span> <span style=color:#66d9ef>ON</span> (tab1.<span style=color:#66d9ef>size</span> <span style=color:#f92672>=</span> tab2.<span style=color:#66d9ef>size</span>) <span style=color:#66d9ef>WHERE</span> tab1.<span style=color:#66d9ef>size</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>
</span></span></code></pre></div></li><li><p>分页和排序</p><ul><li>排序：ASC升序、DESC降序</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> grade <span style=color:#66d9ef>ASC</span>     <span style=color:#75715e>-- 升序（默认）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> student <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> grade <span style=color:#66d9ef>ASC</span>     <span style=color:#75715e>-- 降序
</span></span></span></code></pre></div><ul><li>分页：语法<code>select * from user limit 起始项， 页大小</code></li></ul></li><li><p>嵌套查询（子查询）</p></li></ul><hr><h3 id=函数>函数<a hidden class=anchor aria-hidden=true href=#函数>#</a></h3><ul><li><p>常用函数（许多与Java相同，用到时查）</p></li><li><p><strong>聚合函数</strong>（用的多）</p></li><li><p>加密函数（如AES、MD5、SHA等）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#f92672>`</span><span style=color:#66d9ef>user</span><span style=color:#f92672>`</span> <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1</span>, xunlu, MD5(<span style=color:#ae81ff>123456</span>))   <span style=color:#75715e>-- 对密码进行MD5加密
</span></span></span></code></pre></div></li></ul><hr><h3 id=事务>事务<a hidden class=anchor aria-hidden=true href=#事务>#</a></h3><ul><li>概念</li><li>ACID特性<ul><li>原子性（Atomicity）原子性是指事务包括的所有操作要么成功，要么全部失败回滚</li><li>一致性（Consistency） 事务执行之前和执行之后都必须处于一致性状态。举例来说，假设用户A和用户B两者的钱加起来一共是1000，那么不管A和B之间如何转账、转几次账，事务结束后两个用户的钱相加起来应该还得是1000，这就是事务的一致性。</li><li>隔离性（Isolation）多个并发事务之间要相互隔离</li><li>持久性（Durability）事务一旦被提交了，对数据库中的数据是永久性的</li></ul></li></ul><h3 id=索引>索引<a hidden class=anchor aria-hidden=true href=#索引>#</a></h3><ul><li>分类：<ul><li>普通索引：这是最基本的索引，它没有任何限制。普通索引（由关键字KEY或INDEX定义的索引）的唯一任务是加快对数据的访问速度。因此，应该只为那些最经常出现在查询条件(WHERE column = …)或排序条件(ORDER BY column)中的数据列创建索引。（一张表可以有多个）</li><li>唯一索引：它与前面的普通索引类似，不同的就是：普通索引允许被索引的数据列包含重复的值。而唯一索引列的值必须唯一，但允许有空值。（一张表可以有多个）</li><li>主键索引：它是一种特殊的唯一索引，不允许有空值。一个表只能有一个主键。（一张表只能有一个）</li><li>全文索引：全文索引是一个特殊索引类型，它查找的是文本中的关键词，主要用于全文检索。</li></ul></li><li>索引设置原则<ul><li>索引不是越多越好</li><li>不要对经常变动的数据增加索引</li><li>小数据量的表不需要索引</li><li>索引一般加在常用来查询的字段上</li></ul></li><li>[索引的数据结构](<a href=http://blog.codinglabs.org/articles/theory-of-mysql-index.html>CodingLabs - MySQL索引背后的数据结构及算法原理</a>)</li></ul><h3 id=权限管理和备份>权限管理和备份<a hidden class=anchor aria-hidden=true href=#权限管理和备份>#</a></h3><ul><li>用户管理</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#960050;background-color:#1e0010>用户名</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;密码&#39;</span>        <span style=color:#75715e>-- 创建用户
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#f92672>=</span> PASSWORD(<span style=color:#e6db74>&#39;new password&#39;</span>)        <span style=color:#75715e>-- 修改当前用户的密码
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SET</span> PASSWORD <span style=color:#66d9ef>FOR</span> <span style=color:#960050;background-color:#1e0010>用户名</span> <span style=color:#f92672>=</span> PASSWORD(<span style=color:#e6db74>&#39;new password&#39;</span>)        <span style=color:#75715e>-- 修改指定用户的密码
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>USER</span> <span style=color:#960050;background-color:#1e0010>旧用户名</span> <span style=color:#66d9ef>TO</span> <span style=color:#960050;background-color:#1e0010>新用户名</span>               <span style=color:#75715e>-- 重命名
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>GRANT</span> <span style=color:#960050;background-color:#1e0010>权限名</span> <span style=color:#66d9ef>ON</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>TO</span> <span style=color:#960050;background-color:#1e0010>用户名</span>                 <span style=color:#75715e>-- 授权
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> GRANTS <span style=color:#66d9ef>FOR</span> <span style=color:#960050;background-color:#1e0010>用户名</span>						  <span style=color:#75715e>-- 查看用户权限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>REVOKE</span> <span style=color:#960050;background-color:#1e0010>权限名</span> <span style=color:#66d9ef>ON</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>用户名</span>               <span style=color:#75715e>-- 撤销权限
</span></span></span></code></pre></div><ul><li>备份：备份物理文件、用可视化工具备份、命令行备份（mysqldump命令）</li></ul><h3 id=设计规范>设计规范<a hidden class=anchor aria-hidden=true href=#设计规范>#</a></h3><p>整数用 bigint(11)，用于做标志的整数用 tinyint(1)，created_time 和 modified_time。</p><p><img alt=数据表设计示例 loading=lazy src=/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E8%A1%A8%E8%AE%BE%E8%AE%A1%E6%A0%B7%E4%BE%8B.jpg></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ethereal-lu.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/myisam%E4%B8%8Einnodb%E7%9A%84%E5%8C%BA%E5%88%AB/><span class=title>« Prev</span><br><span>MyISAM与InnoDB 的区别</span>
</a><a class=next href=https://ethereal-lu.github.io/posts/java/java%E7%AC%94%E8%AE%B0/><span class=title>Next »</span><br><span>Java学习笔记</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ethereal-lu.github.io/>lu</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>