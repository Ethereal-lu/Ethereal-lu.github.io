<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>VMware + Ubuntu18.04设置静态 IP | lu</title>
<meta name=keywords content><meta name=description content="进入VMware 的虚拟网络编辑器；
选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。
点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。
点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。

打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。
一路确定并禁用再启用 VMnet8。

打开虚拟机，bash 输入 vim /etc/network/interfaces，内容如下：
source /etc/network/interfaces.d/*

auto lo
iface lo inet loopback

auto ens32
iface ens32 inet static          # 下方设置与之前步骤设置的一致
        address 192.168.40.130   # 主机中设置的 IP，以后虚拟机 IP 固定为它
        netmask 255.255.255.0    # 子网掩码
        gateway 192.168.40.2     # 网关
        dns-nameservers 8.8.8.8  # dns
输入vim /etc/systemd/resolved.conf，使其内容如下："><meta name=author content="lu"><link rel=canonical href=https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://ethereal-lu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ethereal-lu.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ethereal-lu.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ethereal-lu.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ethereal-lu.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/"><meta property="og:site_name" content="lu"><meta property="og:title" content="VMware + Ubuntu18.04设置静态 IP"><meta property="og:description" content="进入VMware 的虚拟网络编辑器；
选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。
点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。
点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。
打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。
一路确定并禁用再启用 VMnet8。
打开虚拟机，bash 输入 vim /etc/network/interfaces，内容如下：
source /etc/network/interfaces.d/* auto lo iface lo inet loopback auto ens32 iface ens32 inet static # 下方设置与之前步骤设置的一致 address 192.168.40.130 # 主机中设置的 IP，以后虚拟机 IP 固定为它 netmask 255.255.255.0 # 子网掩码 gateway 192.168.40.2 # 网关 dns-nameservers 8.8.8.8 # dns 输入vim /etc/systemd/resolved.conf，使其内容如下："><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-14T22:08:18+00:00"><meta property="article:modified_time" content="2021-11-14T22:08:18+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="VMware + Ubuntu18.04设置静态 IP"><meta name=twitter:description content="进入VMware 的虚拟网络编辑器；
选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。
点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。
点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。

打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。
一路确定并禁用再启用 VMnet8。

打开虚拟机，bash 输入 vim /etc/network/interfaces，内容如下：
source /etc/network/interfaces.d/*

auto lo
iface lo inet loopback

auto ens32
iface ens32 inet static          # 下方设置与之前步骤设置的一致
        address 192.168.40.130   # 主机中设置的 IP，以后虚拟机 IP 固定为它
        netmask 255.255.255.0    # 子网掩码
        gateway 192.168.40.2     # 网关
        dns-nameservers 8.8.8.8  # dns
输入vim /etc/systemd/resolved.conf，使其内容如下："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ethereal-lu.github.io/posts/"},{"@type":"ListItem","position":2,"name":"VMware + Ubuntu18.04设置静态 IP","item":"https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"VMware + Ubuntu18.04设置静态 IP","name":"VMware \u002b Ubuntu18.04设置静态 IP","description":"进入VMware 的虚拟网络编辑器；\n选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。\n点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。\n点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。\n打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。\n一路确定并禁用再启用 VMnet8。\n打开虚拟机，bash 输入 vim /etc/network/interfaces，内容如下：\nsource /etc/network/interfaces.d/* auto lo iface lo inet loopback auto ens32 iface ens32 inet static # 下方设置与之前步骤设置的一致 address 192.168.40.130 # 主机中设置的 IP，以后虚拟机 IP 固定为它 netmask 255.255.255.0 # 子网掩码 gateway 192.168.40.2 # 网关 dns-nameservers 8.8.8.8 # dns 输入vim /etc/systemd/resolved.conf，使其内容如下：\n","keywords":[],"articleBody":"进入VMware 的虚拟网络编辑器；\n选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。\n点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。\n点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。\n打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。\n一路确定并禁用再启用 VMnet8。\n打开虚拟机，bash 输入 vim /etc/network/interfaces，内容如下：\nsource /etc/network/interfaces.d/* auto lo iface lo inet loopback auto ens32 iface ens32 inet static # 下方设置与之前步骤设置的一致 address 192.168.40.130 # 主机中设置的 IP，以后虚拟机 IP 固定为它 netmask 255.255.255.0 # 子网掩码 gateway 192.168.40.2 # 网关 dns-nameservers 8.8.8.8 # dns 输入vim /etc/systemd/resolved.conf，使其内容如下：\n[Resolve] DNS=8.8.8.8 DNS=114.114.114.114 #FallbackDNS= #Domains= #LLMNR=no #MulticastDNS=no #DNSSEC=no #Cache=yes #DNSStubListener=yes 重启虚拟机，此时 ip 应该已经固定为之前设置的值了。\n至此，ip 实现静态，主机与虚拟机双向 ping 通，且都能 ping 通 baidu.com 。\n如果虚拟机不能 ping 通百度，则进行下方配置。\n打开 vim /etc/netplan/01-network-manager-all.yaml，内容如下\nnetwork: version: 2 renderer: NetworkManager ethernets: ens32: dhcp4: no dhcp6: no addresses: - 192.168.40.130/24 gateway4: 192.168.40.2 nameservers: addresses: [8.8.8.8, 114.114.114.114] ","wordCount":"122","inLanguage":"en","datePublished":"2021-11-14T22:08:18Z","dateModified":"2021-11-14T22:08:18Z","author":{"@type":"Person","name":"lu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip/"},"publisher":{"@type":"Organization","name":"lu","logo":{"@type":"ImageObject","url":"https://ethereal-lu.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ethereal-lu.github.io/ accesskey=h title="lu (Alt + H)">lu</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ethereal-lu.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://ethereal-lu.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ethereal-lu.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://ethereal-lu.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">VMware + Ubuntu18.04设置静态 IP</h1><div class=post-meta><span title='2021-11-14 22:08:18 +0000 UTC'>2021-11-14</span>&nbsp;·&nbsp;122 words&nbsp;·&nbsp;lu</div></header><div class=post-content><p>进入VMware 的虚拟网络编辑器；</p><p>选择 VMnet8，点击 DHCP 设置，记住子网 IP，子网掩码和起始终止 IP，关闭。</p><p>点击右下方的更改设置，取消勾选 DHCP 分配 IP。再输入刚才记住的子网 IP 和子网掩码。</p><p>点击 NET 设置，记住网关并点击左下方的 DNS 设置，取消勾选自动检测并设置首选DNS为 8.8.8.8，备用为 114.114.114.114。确定、确定、应用。</p><hr><p>打开主机的网络适配器中的 VMnet8 ，进入它的 IPV4 设置，将 IP 设置为之前记住的起始终止 IP 之间的任意一个，子网掩码和 DNS 都与之前设置的VMware一致。</p><p>一路确定并禁用再启用 VMnet8。</p><hr><p>打开虚拟机，bash 输入 <code>vim /etc/network/interfaces</code>，内容如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source /etc/network/interfaces.d/*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>auto lo
</span></span><span style=display:flex><span>iface lo inet loopback
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>auto ens32
</span></span><span style=display:flex><span>iface ens32 inet static          <span style=color:#75715e># 下方设置与之前步骤设置的一致</span>
</span></span><span style=display:flex><span>        address 192.168.40.130   <span style=color:#75715e># 主机中设置的 IP，以后虚拟机 IP 固定为它</span>
</span></span><span style=display:flex><span>        netmask 255.255.255.0    <span style=color:#75715e># 子网掩码</span>
</span></span><span style=display:flex><span>        gateway 192.168.40.2     <span style=color:#75715e># 网关</span>
</span></span><span style=display:flex><span>        dns-nameservers 8.8.8.8  <span style=color:#75715e># dns</span>
</span></span></code></pre></div><p>输入<code>vim /etc/systemd/resolved.conf</code>，使其内容如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>Resolve<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>DNS<span style=color:#f92672>=</span>8.8.8.8
</span></span><span style=display:flex><span>DNS<span style=color:#f92672>=</span>114.114.114.114
</span></span><span style=display:flex><span><span style=color:#75715e>#FallbackDNS=</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Domains=</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#LLMNR=no</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#MulticastDNS=no</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#DNSSEC=no</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Cache=yes</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#DNSStubListener=yes</span>
</span></span></code></pre></div><p>重启虚拟机，此时 ip 应该已经固定为之前设置的值了。</p><p>至此，ip 实现静态，主机与虚拟机双向 ping 通，且都能 ping 通 baidu.com 。</p><hr><p>如果虚拟机不能 ping 通百度，则进行下方配置。</p><p>打开 <code>vim /etc/netplan/01-network-manager-all.yaml</code>，内容如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>network</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>renderer</span>: <span style=color:#ae81ff>NetworkManager</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ethernets</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ens32</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>dhcp4</span>: <span style=color:#66d9ef>no</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>dhcp6</span>: <span style=color:#66d9ef>no</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>addresses</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>192.168.40.130</span><span style=color:#ae81ff>/24</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>gateway4</span>: <span style=color:#ae81ff>192.168.40.2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>nameservers</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>addresses</span>: [<span style=color:#ae81ff>8.8.8.8</span>, <span style=color:#ae81ff>114.114.114.114</span>]
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/c%23-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/><span class=title>« Prev</span><br><span>C# 学习笔记</span>
</a><a class=next href=https://ethereal-lu.github.io/posts/%E5%B0%8F%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/feign%E5%8F%91%E8%B5%B7https%E8%AF%B7%E6%B1%82/><span class=title>Next »</span><br><span>feign发起https请求</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ethereal-lu.github.io/>lu</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>